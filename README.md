# ğŸ¦ ì€í–‰ì°½êµ¬ ë§¤ë‹ˆì €

## ğŸ“– ëª©ì°¨
1. [ì†Œê°œ](#-ì†Œê°œ)
2. [íŒ€ì›](#-íŒ€ì›)
3. [íƒ€ì„ë¼ì¸](#-íƒ€ì„ë¼ì¸)
4. [ì‹œê°í™”ëœ í”„ë¡œì íŠ¸ êµ¬ì¡°](#-ì‹œê°í™”ëœ-í”„ë¡œì íŠ¸-êµ¬ì¡°)
5. [ì‹¤í–‰ í™”ë©´](#-ì‹¤í–‰-í™”ë©´)
6. [íŠ¸ëŸ¬ë¸” ìŠˆíŒ…](#-íŠ¸ëŸ¬ë¸”-ìŠˆíŒ…)
7. [ì°¸ê³  ë§í¬](#-ì°¸ê³ -ë§í¬)
8. [íŒ€ íšŒê³ ](#-íŒ€-íšŒê³ )

</br>

## ğŸ€ ì†Œê°œ
ì„ì˜ì˜ ìˆ˜ì˜ ê³ ê°ì´ ë°©ë¬¸í•˜ê³ , ì€í–‰ì°½êµ¬ ë§¤ë‹ˆì €ê°€ ê³ ê°ë“¤ì˜ ì˜ˆê¸ˆ, ëŒ€ì¶œì—…ë¬´ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤.
* ì£¼ìš” ê°œë…: `LinkedList`, `GCD`, `Queue`, `DispatchQueue`, `DispatchGroup`, `Thread`

</br>

## ğŸ‘¨â€ğŸ’» íŒ€ì›
| idinaloq | EtialMoon |
| :--------: | :--------: |
| <Img src = "https://user-images.githubusercontent.com/109963294/235301015-b81055d2-8618-433c-b680-58b6a38047d9.png" width = "200" height="200"/> |<img src="https://i.imgur.com/hSdYobS.jpg" width="200"> |
|[Github Profile](https://github.com/idinaloq) |[Github Profile](https://github.com/hojun-jo) |

</br>

## â° íƒ€ì„ë¼ì¸
|ë‚ ì§œ|ë‚´ìš©|
|:--:|--|
|2023.07.10.| Node íƒ€ì… ì¶”ê°€<br>SingleLinkedList íƒ€ì… ì¶”ê°€<br> |
|2023.07.12.| SingleLinkedList ë©”ì„œë“œ ì¶”ê°€ |
|2023.07.13.| Bank íƒ€ì… ì¶”ê°€<br>Customer íƒ€ì… ì¶”ê°€<br>ì½”ë“œ ë¦¬íŒ©í† ë§<br>BankManager êµ¬í˜„ |
|2023.07.15|enqueueCustomersë©”ì„œë“œ ë„¤ì´ë° ìˆ˜ì •|
|2023.07.17|ëŒ€ì¶œ ì—…ë¬´ ê¸°ëŠ¥ êµ¬í˜„|
|2023.07.17|íŒŒì¼ë¶„í• <br>workë©”ì„œë“œ ë§¤ê°œë³€ìˆ˜ ìˆ˜ì •<br>processBusinessì¶”ìƒí™”ë ˆë²¨ ìˆ˜ì •<br>ì „ë°˜ì ì¸ ë„¤ì´ë° ìˆ˜ì •|
|2023.07.19|numberFormatteríƒ€ì… íŒŒì¼ë¶„í• <br>BankingServiceíƒ€ì…ì— CustomStringConvertible ì±„íƒ|
|2023.07.20|measureStartTime, measureTotalTimeë©”ì„œë“œê°€ ê°ê° Date, TimeIntervalì„ ë°˜í™˜í•˜ë„ë¡ ìˆ˜ì •|


</br>

## ğŸ‘€ ì‹œê°í™”ëœ í”„ë¡œì íŠ¸ êµ¬ì¡°

### â„¹ï¸ File Tree
```
BankManagerConsoleApp
â”œâ”€â”€ BankManagerConsoleApp
â”‚ Â  â”œâ”€â”€ main
â”‚ Â  â”œâ”€â”€ Node
â”‚Â Â  â”œâ”€â”€ SingleLinkedList
â”‚ Â  â”œâ”€â”€ Bank
â”‚Â Â  â”œâ”€â”€ BankManager
â”‚ Â  â”œâ”€â”€ Customer
â”‚   â”œâ”€â”€ BankingService
â”‚   â””â”€â”€ TotalTimeFormatter
â””â”€â”€ BankManagerConsoleAppTests
    â””â”€â”€ BankManagerConsoleAppTests
```

### ğŸ“ Class Diagram
<p align="center">
<img width="1000" src="https://github.com/idinaloq/testRep/assets/124647187/3c8184ea-a1bd-475f-b833-9668d6a25b94">
</p>

</br>

## ğŸ’» ì‹¤í–‰ í™”ë©´ 
<img width="500"
src="https://github.com/idinaloq/testRep/assets/124647187/17197f90-e5a0-4893-b98f-77dc2740c5e3">

</br>

## ğŸ§¨ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…

1ï¸âƒ£ **Test Double** <br>

ğŸ”’ **ë¬¸ì œì ** <br>
- ìœ ë‹› í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•˜ëŠ” ê³¼ì •ì—ì„œ ëª¨ë“ˆì— ì ‘ê·¼ ì‹œ ì ‘ê·¼ì œì–´ì ë•Œë¬¸ì— ì ‘ê·¼ì´ ë¶ˆê°€ëŠ¥ í•œ ë¬¸ì œê°€ ìˆì—ˆê³ , í•´ê²° ë°©ë²•ì„ ë‹¤ìŒê³¼ ê°™ì´ ê³ ë¯¼í•´ ë³´ì•˜ìŠµë‹ˆë‹¤.
    1. ì ‘ê·¼ì œì–´ì ìˆ˜ì •: ìœ ë‹› í…ŒìŠ¤íŠ¸ì˜ ëª©ì ì€ í”„ë¡œí¼í‹°, ë©”ì„œë“œ, í´ë˜ìŠ¤ ë“±ì„ ì½”ë“œ ë‹¨ìœ„ë¡œ í…ŒìŠ¤íŠ¸í•˜ê¸° ìœ„í•´ì„œ ì§„í–‰í•˜ì§€ë§Œ, ë§Œì•½ í…ŒìŠ¤íŠ¸ë¥¼ìœ„í•´ ì ‘ê·¼ì œì–´ìê°€ ë³€ê²½ëœë‹¤ë©´ ì½”ë“œê°€ í…ŒìŠ¤íŠ¸ì— ì¢…ì†ë˜ê³ , ìº¡ìŠí™”ì—ë„ ë¬¸ì œê°€ ìˆë‹¤ê³  ìƒê°í•´ì„œ ë‹¤ìŒ ë°©ë²•ì„ ê³ ë¯¼í–ˆìŠµë‹ˆë‹¤.
    2. `extension` ì‚¬ìš©: ì ‘ê·¼ì œì–´ì ìˆ˜ì •ì„ ëŒ€ì²´í•  ë°©ë²•ìœ¼ë¡œ extensionìœ¼ë¡œ í…ŒìŠ¤íŠ¸í•  ì½”ë“œì˜ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ëŠ” ê²ƒì¸ë°, ìº¡ìŠí™”ì— ë¬¸ì œê°€ ì—†ì§€ë§Œ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ ì½”ë“œë¥¼ ì‘ì„±í•œë‹¤ëŠ” ë¶€ë¶„ì—ì„œ ì•„ì‰¬ì›€ì´ ìˆì—ˆê¸° ë•Œë¬¸ì— ì„ íƒí•˜ì§€ ì•Šê³  ë‹¤ë¥¸ ë°©ë²•ì„ ê³ ë¯¼í–ˆìŠµë‹ˆë‹¤.
    3. í…ŒìŠ¤íŠ¸ ë”ë¸” ì‚¬ìš©: í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ ê°ì²´ë¥¼ ë§Œë“¤ì–´ ì‹¤ì œ ì½”ë“œì—ì„œ ì ‘ê·¼ì œì–´ì ë•Œë¬¸ì— í…ŒìŠ¤íŠ¸ê°€ ë¶ˆê°€ëŠ¥í•˜ë˜ ë¶€ë¶„ì„ ëŒ€ì‹ í•˜ê³ , ì‹¤ì œë¡œ ë™ì‘ë˜ì–´ì•¼ í•˜ëŠ” ì½”ë“œì˜ ë³€ê²½ ì—†ì´ í…ŒìŠ¤íŠ¸ë¥¼ í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì´ ë°©ë²•ì„ ì„ íƒí–ˆìŠµë‹ˆë‹¤.

- í•˜ì§€ë§Œ `stub` ê°ì²´ì™€ `real` ê°ì²´ ê°„ì˜ ë™ì¼ì„±ì„ ë³´ì¥í•  ìˆ˜ ì—†ë‹¤ëŠ” ë¬¸ì œê°€ ìˆì—ˆìŠµë‹ˆë‹¤.

```swift
struct LinkedListStub<Element> {
    var head: Node<Element>?
    var tail: Node<Element>?
...
}
```

```swift
struct LinkedList<Element> {
    private var head: Node<Element>?
    private var tail: Node<Element>?
...
}
```

ğŸ”‘ **í•´ê²°ë°©ë²•** 
- `real` ê°ì²´ì—ì„œ `private`ì¸ `firstNode` í”„ë¡œí¼í‹°ë¥¼ ì‚¬ìš©í•˜ëŠ” ë©”ì„œë“œë¥¼ í†µí•´ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•  ìˆ˜ ìˆë„ë¡ í–ˆìŠµë‹ˆë‹¤.
```swift
struct SingleLinkedList<Element> {
    ...
    mutating func currentFirstNode() -> Node<Element>? {
        return firstNode
    ...
    }
```

```swift
final class BankManagerConsoleAppTests: XCTestCase {
    ...
    func test_ë¦¬ìŠ¤íŠ¸ì—Nodeê°€ìˆëŠ”ê²½ìš°_enqueueí•˜ë©´_firstNodeëŠ”ìœ ì§€ëœë‹¤() {
        let firstInput: Int = 123
        let secondInput: Int = 456

        sut.enqueue(firstInput)
        let previousFirstNode = sut.currentFirstNode()
        sut.enqueue(secondInput)
        let currentFirstNode = sut.currentFirstNode()

        XCTAssert(previousFirstNode === currentFirstNode)
    }
...
}
```


2ï¸âƒ£ **Linked List** <br>

ğŸ”’ **ë¬¸ì œì ** <br>
- `Bank`íƒ€ì…ì—ì„œ ê³ ê°ë“¤ì˜ ìˆ˜ ë§Œí¼ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•´ì„œ `enqueue`í•˜ëŠ” `enqueueCustomers()`ë©”ì„œë“œë¥¼ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ 3ë²ˆ ì´ìƒ `enqueue`ë¥¼ í•˜ê²Œ ë˜ë©´ `enqueue`ê°€ ë˜ì§€ ì•ŠëŠ” í˜„ìƒì´ ìˆì—ˆìŠµë‹ˆë‹¤. 
- `SingleLinkedList`ì—ì„œ `tail`ì„ ì§€ìš°ëŠ” ê²ƒìœ¼ë¡œ ìˆ˜ì •í•˜ë©° ë¬¸ì œê°€ ìˆì—ˆìŠµë‹ˆë‹¤.

**ì´ì „ì½”ë“œ**
```swift
mutating func enqueue(_ data: Element) {
    let node: Node<Element> = Node(data: data)

    guard !isEmpty else {
        firstNode = node

        return
    }

    var nextNode: Node<Element>? = firstNode

    while nextNode?.next != nil {
        nextNode = firstNode?.next
    }

    nextNode?.next = node
}
```

ğŸ”‘ **í•´ê²°ë°©ë²•** 
- ì²˜ìŒ ì½”ë“œë¥¼ ë³´ë©´, ë§Œì•½ ìƒˆë¡œìš´ ë…¸ë“œê°€ ì¶”ê°€ ë˜ì—ˆì„ ë•Œ í•­ìƒ ì²« ë²ˆì§¸ì™€ ê°™ì€ ê°’ì„ ê°€ì§€ëŠ” ë…¸ë“œë¥¼ ì¶”ê°€í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ ë•Œë¬¸ì— ì˜ëª»ëœ ê°’ì´ ê³„ì† ë“¤ì–´ê°”ê¸° ë•Œë¬¸ì— ë‹¤ìŒê³¼ ê°™ì´ ìˆ˜ì •í–ˆê³ , ë‘ ì°¨ì´ì ì„ í‘œí˜„í•˜ë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

**ìˆ˜ì •ëœ ì½”ë“œ**

```swift
mutating func enqueue(_ data: Element) {
    ...
    while nextNode?.next != nil {
        nextNode = nextNode?.next
    }
    ...
}
```

**ì°¨ì´ì **
|sequence|nextNode = firstNode?.next|nextNode = nextNode?.next|
|:--:|:--:|:--:|
|ì´ˆê¸°ê°’|nil|nil|
|enqueue(1)|1 -> nil|1 -> nil|
|enqueue(2)|1 -> 2 -> nil|1 -> 2 -> nil|
|enqueue(3)|1 -> 2 -> 3 -> nil |1 -> 2 -> 3 -> nil|
|enqueue(4)|1 -> 2 -> 3 -> 3 -> ...|1 -> 2 -> 3 -> 4 -> nil|

3ï¸âƒ£ **ë©”ì„œë“œì˜ ì—­í• ê³¼ ë§¤ê°œë³€ìˆ˜** <br>

ğŸ”’ **ë¬¸ì œì ** <br>
- `GCD`ë¥¼ í™œìš©í•˜ê¸° ìœ„í•´ `processBusiness`ë©”ì„œë“œ ë‚´ë¶€ì—ì„œ í”„ë¡œí¼í‹°ë¥¼ ë§Œë“¤ê³  ì´ë¥¼ `work`ë©”ì„œë“œì— ì „ë‹¬ì¸ìë¡œ ì „ë‹¬í–ˆëŠ”ë°, ì´ë ‡ê²Œ ë˜ë©´ ê²°êµ­ `BankManager`ê°€ `work`ë¼ëŠ” ë™ì‘ì„ í•  ë•Œ `group`ê³¼ `semaphore`ì™€ ê°™ì€ í•„ìš”ì—†ëŠ” ì •ë³´ë“¤ì„ ë„˜ê²¨ì£¼ëŠ” ë¬¸ì œê°€ ìˆì—ˆìŠµë‹ˆë‹¤.

**ì´ì „ì½”ë“œ**
```swift
struct BankManager {
    func work(for customer: Customer, group: DispatchGroup, semaphore: DispatchSemaphore) { ... }
}
struct Bank {
    private mutating func processBusiness() {
        var depositBankManagerNumber = 0
        let group = DispatchGroup()
        let semaphore = DispatchSemaphore(value: 3)
        let startDate = Date()
}
```

ğŸ”‘ **í•´ê²°ë°©ë²•** 
- ë‹¤ìŒê³¼ ê°™ì´ `Bank`íƒ€ì…ì´ ì•„ë‹Œ `BankManager`íƒ€ì…ì—ì„œ `group`ê³¼ `semaphore` í”„ë¡œí¼í‹°ë¥¼ ë§Œë“¤ê³  ì´ë¥¼ `work`ë©”ì„œë“œì—ì„œ ì‚¬ìš©í•˜ë„ë¡ ìˆ˜ì •ì„ í–ˆìŠµë‹ˆë‹¤.
- ê²°ê³¼ì ìœ¼ë¡œ `Dispatch Queue`ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ í”„ë¡œí¼í‹°ë“¤ì´ `processBusiness`ë©”ì„œë“œë¥¼ ì‹¤í–‰í•  ë•Œ ë§ˆë‹¤ ê³„ì†í•´ì„œ ìƒì„±ë˜ì§€ ì•Šê²Œ ë˜ì—ˆê¸° ë•Œë¬¸ì— `BankManager`ê°€ `work(for: customer)`ë¼ëŠ” ë™ì‘ì„ í•  ë•Œ ì–´ë–¤ ê¸°ëŠ¥ì¸ì§€ì— ëŒ€í•´ ëª…í™•í•˜ê²Œ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆê²Œ ë˜ì—ˆë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤.

**ìˆ˜ì •ëœ ì½”ë“œ**
```swift
 struct BankManager {
    private let group: DispatchGroup = DispatchGroup()
    private let semaphore: DispatchSemaphore
    
    init(semaphore: Int) {
        self.semaphore = DispatchSemaphore(value: semaphore)
    }
     
    func work(for customer: Customer) { ... }
 }
```

4ï¸âƒ£ **ì€í–‰ì›ì„ ë‚˜ëˆ„ëŠ” ê¸°ì¤€** <br>

ğŸ”’ **ë¬¸ì œì ** <br>
- ì€í–‰ì›ì˜ ìˆ˜ê°€ 3ëª…ì´ê³  2ëª…ì€ ì˜ˆê¸ˆ, 1ëª…ì€ ëŒ€ì¶œ ì—…ë¬´ë¥¼ ì²˜ë¦¬í•´ì•¼ í•©ë‹ˆë‹¤. ì€í–‰ì› 1ëª…ë‹¹ í•˜ë‚˜ì˜ `BankManager` ê°ì²´ë¥¼ ë‘ëŠ” ê²ƒì„ ìƒê°í–ˆì§€ë§Œ `BankManager`ê°€ ì—…ë¬´ë¥¼ ë‚˜ëˆ„ëŠ” ê¸°ì¤€ì´ ë¶ˆëª…í™•í–ˆìŠµë‹ˆë‹¤.

**ì´ì „ì½”ë“œ**
```swift
struct Bank {
    private let bankManagers: [BankManager]
    ...
    private mutating func processBusiness() {
        ...
        while let customer = customerQueue.dequeue() {
            ...
            switch customer.getBankingType() {
            case .deposit:
                bankManagers[depositBankManagerNumber].work(for: customer, group: group, semaphore: semaphore)
                depositBankManagerNumber += 1
            case .loans:
                bankManagers[2].work(for: customer, group: group, semaphore: semaphore)
            case .none:
                print("BankingServiceTypeIsNil")
            }
        }
        ...
    }
    ...
}
```

ğŸ”‘ **í•´ê²°ë°©ë²•** 
- ì—…ë¬´ë³„ë¡œ `BankManager` ê°ì²´ë¥¼ ë‚˜ëˆ„ê³  ê°ê°ì˜ `DispatchSemaphore`ë¥¼ ì¡°ì ˆí•´ ìŠ¤ë ˆë“œ í•˜ë‚˜ë¥¼ ì€í–‰ì› í•œ ëª…ìœ¼ë¡œ ë³¼ ìˆ˜ ìˆë„ë¡ í–ˆìŠµë‹ˆë‹¤.

**ìˆ˜ì •ëœ ì½”ë“œ**
```swift
struct Bank {
    private let depositBankManagers: BankManager = BankManager(people: 2)
    private let loansBankManagers: BankManager = BankManager(people: 1)
    ...
    private mutating func processBusiness() {
        let startTime: Date = measureStartTime()
        
        while let customer = customerQueue.dequeue() {
            switch customer.getBankingServiceType() {
            case .deposit:
                depositBankManagers.work(for: customer)
            case .loans:
                loansBankManagers.work(for: customer)
            case .none:
                print("BankingTypeIsNil")
            }
        }
        
        depositBankManagers.finishWork()
        loansBankManagers.finishWork()
        totalTime = measureTotalTime(startTime)
    }
    ...
}
```

</br>

## ğŸ“š ì°¸ê³  ë§í¬
<!-- - [ğŸApple Docs: ]()
- [ğŸ“˜stackOverflow: ]() -->
- [ğŸApple Docs: Generics](https://docs.swift.org/swift-book/documentation/the-swift-programming-language/generics/#Naming-Type-Parameters)
- [ğŸApple Docs: CustomStringConvertible](https://developer.apple.com/documentation/swift/customstringconvertible)
- [ğŸApple Docs: DispatchQueue](https://developer.apple.com/documentation/dispatch/dispatchqueue)
- [ğŸApple Docs: DispatchGroup](https://developer.apple.com/documentation/dispatch/dispatchgroup)
- [ğŸApple Docs: DispatchSemaphore](https://developer.apple.com/documentation/dispatch/dispatchsemaphore)
- [ğŸ“˜blog: Linked List](https://supermemi.tistory.com/entry/Linked-list-ì—°ê²°-ë¦¬ìŠ¤íŠ¸-ë€-ë¬´ì—‡ì¸ê°€)
- [ğŸ“˜blog: Main Threadì™€ Background Threadì˜ ì´í•´](https://velog.io/@yongchul/iOSThreadì˜-ê¸°ë³¸ê°œë…)
- [ğŸ–¥ï¸video: Single Linked List](https://www.youtube.com/watch?v=R9PTBwOzceo)

</br>

## ğŸ‘¥ íŒ€ íšŒê³ 

### ìš°ë¦¬íŒ€ ì˜í•œ ì 
- í”„ë¡œì íŠ¸ ìš”êµ¬ì¡°ê±´ì— ë§ë„ë¡ êµ¬í˜„ì„ í–ˆê³ , ë©”ì„œë“œì™€ íƒ€ì…ì˜ ì¶”ìƒí™”ë¥¼ ì˜ í–ˆë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤.
- ê¹”ë”í•œ ì½”ë“œë¥¼ ë§Œë“¤ê¸° ìœ„í•´ ê¸°ëŠ¥ ë¶„ë¦¬ì™€ ì¶”ìƒí™” ë ˆë²¨ì„ ë§ì¶”ëŠ” ë“± ë…¸ë ¥í–ˆë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤.

### ìš°ë¦¬íŒ€ ê°œì„ í•  ì 
- ì´ë²ˆ í”„ë¡œì íŠ¸ì™€ ìš°ë¦¬ íŒ€ë§Œì˜ ë¬¸ì œê°€ ì•„ë‹ˆë¼ê³  ìƒê°í•˜ëŠ”ë°, ì§ í”„ë¡œê·¸ë˜ë°ì—ì„œ ë“œë¼ì´ë²„ì™€ ë„¤ë¹„ê²Œì´í„°ì˜ ì—­í• ì´ ëª¨í˜¸í•´ì ¸ ê°€ëŠ” ê²ƒ ê°™ë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤.
